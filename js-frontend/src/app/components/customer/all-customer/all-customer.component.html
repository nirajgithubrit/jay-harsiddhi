<div
  class="min-h-screen bg-gradient-to-br from-yellow-50 via-blue-50 to-pink-100 flex flex-col h-100vh"
>
  <!-- Header -->
  <app-header></app-header>

  <!-- Content -->
  <main class="container mx-auto flex-1 max-h-screen px-5 pt-8 pb-20 overflow-auto hide-scrollbar">
    <div
      class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-8 space-y-3 sm:space-y-0"
    >
      <h2 class="text-2xl sm:text-3xl font-bold text-blue-800">All Customer</h2>
      <button
        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition w-full sm:w-auto"
        (click)="goToAddCustomer()"
      >
        + Add Customer
      </button>
    </div>
    <div
      class="overflow-auto hide-scrollbar shadow-2xl rounded-xl"
      style="
    max-height: calc(
      100vh - 220px - var(--bottom-bar-height)
    );
  "
    >
      <table class="min-w-full divide-y divide-blue-200 bg-white/80 rounded-xl">
        <thead>
          <tr>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Serial No.
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Name
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Phone No.
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Address
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Order Detail
            </th>
            <th
              class="px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase"
            >
              Total Amount
            </th>
            <th
              class="px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase"
            >
              Recieved Amount
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Payment Type
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"
            >
              Invoice
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let customer of customers; let i = index"
            class="hover:bg-blue-50 transition cursor-pointer"
            (click)="goToViewCustomer(customer._id)"
          >
            <td class="px-4 py-3">{{ i + 1 }}</td>
            <td class="px-4 py-3 font-semibold text-blue-700">
              {{ customer.name }}
            </td>
            <td class="px-4 py-3">{{ customer.phoneNumber }}</td>
            <td class="px-4 py-3">{{ customer.address }}</td>
            <td class="px-4 py-3">
              <span
                [ngClass]="{
                  'bg-green-100 text-green-800': customer.orderStatus === 'Confirm',
                  'bg-yellow-100 text-yellow-800':
                    customer.orderStatus === 'InProgress',
                  'bg-blue-100 text-blue-800': customer.orderStatus === 'Completed',
                  'bg-red-100 text-red-800': customer.orderStatus === 'Not-Confirm'
                }"
                class="px-3 py-1 rounded-full text-xs font-bold"
              >
                {{ customer.orderStatus }}
              </span>
            </td>
            <td class="px-4 py-3 text-right text-blue-900 font-medium">
              ₹{{ customer.totalAmount ?? 0 }}
            </td>
            <td class="px-4 py-3 text-right text-green-800 font-medium">
              ₹{{ customer.recievedAmount ?? 0 }}
            </td>
            <td class="px-4 py-3">{{ customer.paymentMethod }}</td>
            <td class="px-4 py-3">
              <button
                (click)="showInvoice(customer); $event.stopPropagation()"
                class="bg-blue-600 hover:bg-blue-700
                      disabled:bg-blue-300
                      disabled:text-white/70
                      disabled:cursor-not-allowed
                      disabled:shadow-none
                      text-white font-semibold
                      px-4 py-2 rounded-lg shadow-md
                      transition w-full sm:w-auto"
                [disabled]="customer.shutters.length === 0 && customer.extraGlasses.length === 0"
              >
              View
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</div>
